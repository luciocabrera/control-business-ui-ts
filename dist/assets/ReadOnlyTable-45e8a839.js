import{c as V,b as n,F as j,j as t,H as k,T as E,h as N,Z as i}from"./index-a0b9f4a7.js";import{r as m}from"./vendor-2ae8ef6f.js";import{u as $,f as w,g as D,a as B,b as v,c as A}from"./@tanstack/react-table-e9a5a890.js";import{u as O}from"./react-virtual-793d5da3.js";import{r as P}from"./@tanstack/match-sorter-utils-120d5a33.js";const W=(o,d,c,s)=>{const a=P(o.getValue(d),c);return s({itemRank:a}),a.passed},Q=({actions:o,columns:d,height:c,renderSubComponent:s,getRowCanExpand:a,title:b,showHeader:F=!0,allowFiltering:Z,data:M,isLoading:y})=>{var z,x;const[S,C]=m.useState([]),{state:{columnFilters:T}}=V(),u=m.useRef(null),h=$({data:M,columns:d,filterFns:{fuzzy:W},state:{columnFilters:T,sorting:S},manualFiltering:!0,onSortingChange:C,getCoreRowModel:D(),getFilteredRowModel:B(),getSortedRowModel:v(),getExpandedRowModel:A(),getRowCanExpand:a,enableColumnResizing:!0,columnResizeMode:"onChange"}),{rows:p}=h.getRowModel(),H=O({parentRef:u,size:p.length,overscan:10}),{virtualItems:l,totalSize:I}=H,R=l.length>0&&((z=l==null?void 0:l[0])==null?void 0:z.start)||0,f=l.length>0?I-(((x=l==null?void 0:l[l.length-1])==null?void 0:x.end)||0):0;return n(j,{children:[F&&t(k,{title:b,children:t(E,{children:o})}),y&&t(N,{}),t("div",{id:"table-wrapper",ref:u,style:{height:c},className:i["table-wrapper"],children:n("table",{children:[t("thead",{children:h.getHeaderGroups().map(r=>t("tr",{children:r.headers.map(e=>n("th",{style:{width:e.getSize(),maxWidth:e.getSize()},children:[e.isPlaceholder?null:n("div",{onClick:e.column.getToggleSortingHandler(),className:i["header-wrapper"],children:[w(e.column.columnDef.header,e.getContext()),{asc:t("span",{children:"↑"}),desc:t("span",{children:"↓"})}[e.column.getIsSorted()]??null]}),e.column.getCanResize()&&t("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:[i.resizer,i[e.column.getIsResizing()?"isResizing":""]].join(" ")})]},e.id))},r.id))}),n("tbody",{children:[R>0&&t("tr",{children:t("td",{style:{height:`${R}px`}})}),l.map(r=>{const e=p[r.index];return n(m.Fragment,{children:[t("tr",{ref:r.measureRef,children:e.getVisibleCells().map(g=>t("td",{className:i["simple-td"],children:w(g.column.columnDef.cell,g.getContext())},g.id))},`tr-${e.id}`),e.getIsExpanded()&&t("tr",{children:t("td",{colSpan:e.getVisibleCells().length,children:s==null?void 0:s({row:e})})},`expandable-tr-${e.id}`)]},e.id)}),f>0&&t("tr",{children:t("td",{style:{height:`${f}px`}})})]})]})})]})};export{Q as R};
