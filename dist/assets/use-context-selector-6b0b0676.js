import{r as o,s as w,b as x}from"./vendor-2ae8ef6f.js";const p=Symbol(),S=Symbol(),m=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?o.useEffect:o.useLayoutEffect,P=w.unstable_runWithPriority?c=>w.unstable_runWithPriority(w.unstable_NormalPriority,c):c=>c();function R(c){const u=o.createContext({[p]:{v:{current:c},n:{current:-1},l:new Set,u:t=>t()}});var d;return u[S]=u.Provider,u.Provider=(d=u.Provider,({value:t,children:v})=>{const s=o.useRef(t),n=o.useRef(0),[a,i]=o.useState(null);a&&(a(t),i(null));const r=o.useRef();if(!r.current){const e=new Set,l=(y,h)=>{x.unstable_batchedUpdates(()=>{n.current+=1;const f={n:n.current};h!=null&&h.suspense&&(f.n*=-1,f.p=new Promise(b=>{i(()=>E=>{f.v=E,delete f.p,b(E)})})),e.forEach(b=>b(f)),y()})};r.current={[p]:{v:s,n,l:e,u:l}}}return m(()=>{s.current=t,n.current+=1,P(()=>{r.current[p].l.forEach(e=>{e({n:n.current,v:t})})})},[t]),o.createElement(d,{value:r.current},v)}),delete u.Consumer,u}function g(c,u){const d=o.useContext(c)[p],{v:{current:t},n:{current:v},l:s}=d,n=u(t),[a,i]=o.useReducer((r,e)=>{if(!e)return[t,n];if("p"in e)throw e.p;if(e.n===v)return Object.is(r[1],n)?r:[t,n];try{if("v"in e){if(Object.is(r[0],e.v))return r;const l=u(e.v);return Object.is(r[1],l)?r:[e.v,l]}}catch{}return[...r]},[t,n]);return Object.is(a[1],n)||i(),m(()=>(s.add(i),()=>{s.delete(i)}),[s]),a[1]}export{R as E,g as h};
